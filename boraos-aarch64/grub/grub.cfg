# BoraOS 0.1 ARM64 - GRUB Configuration
# UEFI ARM64 Boot Configuration

# Import theme/modules
if [ "${grub_platform}" = "efi" ]; then
    insmod part_gpt
    insmod part_msdos
    insmod fat
    insmod iso9660
    insmod all_video
    insmod gfxterm
fi

# Serial console support
insmod serial
insmod usb_keyboard

# Set variables
set default="0"
set timeout="30"
set timeout_style="menu"

# Set the root device
search --no-floppy --set=root --label "BORAOS_ARM_0_1"

# Graphics settings
if loadfont "${prefix}/fonts/unicode.pf2"; then
    if [ "${grub_platform}" = "efi" ]; then
        insmod efi_gop
        insmod efi_uga
    fi
    insmod gfxterm
    set gfxmode=auto
    set gfxpayload=keep
    terminal_output gfxterm
fi

# Menu color scheme
set menu_color_normal=cyan/blue
set menu_color_highlight=white/blue

# Menu entries
menuentry "BoraOS ARM64 (default)" --class archlinux --class gnu-linux --class gnu --class os {
    set gfxpayload=keep
    linux /%INSTALL_DIR%/boot/aarch64/vmlinuz-linux archisobasedir=%INSTALL_DIR% archisolabel=BORAOS_ARM_0_1
    initrd /%INSTALL_DIR%/boot/aarch64/initramfs-linux.img
}

menuentry "BoraOS ARM64 (nomodeset)" --class archlinux --class gnu-linux --class gnu --class os {
    set gfxpayload=keep
    linux /%INSTALL_DIR%/boot/aarch64/vmlinuz-linux archisobasedir=%INSTALL_DIR% archisolabel=BORAOS_ARM_0_1 nomodeset
    initrd /%INSTALL_DIR%/boot/aarch64/initramfs-linux.img
}

menuentry "BoraOS ARM64 (copytoram)" --class archlinux --class gnu-linux --class gnu --class os {
    set gfxpayload=keep
    linux /%INSTALL_DIR%/boot/aarch64/vmlinuz-linux archisobasedir=%INSTALL_DIR% archisolabel=BORAOS_ARM_0_1 copytoram
    initrd /%INSTALL_DIR%/boot/aarch64/initramfs-linux.img
}

menuentry "UEFI Firmware Settings" --class settings --class system {
    fwsetup
}

menuentry "System shutdown" --class shutdown --class system {
    halt
}

menuentry "System restart" --class reboot --class system {
    reboot
}
