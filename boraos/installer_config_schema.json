{
    "installer_architecture": {
        "version": "0.1",
        "sprint": 3,
        "status": "final_locked"
    },
    "state_machine": {
        "total_states": 14,
        "states": [
            {
                "id": 1,
                "name": "STATE_LANGUAGE",
                "title": "Language Selection",
                "can_go_back": false,
                "next_state": "STATE_KEYBOARD"
            },
            {
                "id": 2,
                "name": "STATE_KEYBOARD",
                "title": "Keyboard Layout",
                "can_go_back": true,
                "next_state": "STATE_TIMEZONE"
            },
            {
                "id": 3,
                "name": "STATE_TIMEZONE",
                "title": "Timezone Configuration",
                "can_go_back": true,
                "next_state": "STATE_DISK_SELECT"
            },
            {
                "id": 4,
                "name": "STATE_DISK_SELECT",
                "title": "Disk Selection",
                "can_go_back": true,
                "next_state": "STATE_DISK_PARTITION"
            },
            {
                "id": 5,
                "name": "STATE_DISK_PARTITION",
                "title": "Partitioning",
                "can_go_back": true,
                "next_state": "STATE_FILESYSTEM"
            },
            {
                "id": 6,
                "name": "STATE_FILESYSTEM",
                "title": "Filesystem Selection",
                "can_go_back": true,
                "next_state": "STATE_USER_CREATE"
            },
            {
                "id": 7,
                "name": "STATE_USER_CREATE",
                "title": "User Account",
                "can_go_back": true,
                "next_state": "STATE_NETWORK"
            },
            {
                "id": 8,
                "name": "STATE_NETWORK",
                "title": "Network Configuration",
                "can_go_back": true,
                "next_state": "STATE_ADDITIONAL_PACKAGES"
            },
            {
                "id": 9,
                "name": "STATE_ADDITIONAL_PACKAGES",
                "title": "Additional Packages",
                "can_go_back": true,
                "next_state": "STATE_SDDM_THEME"
            },
            {
                "id": 10,
                "name": "STATE_SDDM_THEME",
                "title": "SDDM Theme Selection",
                "can_go_back": true,
                "next_state": "STATE_HYPRLAND_OPTIONAL"
            },
            {
                "id": 11,
                "name": "STATE_HYPRLAND_OPTIONAL",
                "title": "Hyprland Optional Components",
                "can_go_back": true,
                "next_state": "STATE_SUMMARY"
            },
            {
                "id": 12,
                "name": "STATE_SUMMARY",
                "title": "Installation Summary",
                "can_go_back": true,
                "next_state": "STATE_INSTALL"
            },
            {
                "id": 13,
                "name": "STATE_INSTALL",
                "title": "Installing BoraOS",
                "can_go_back": false,
                "next_state": "STATE_REBOOT"
            },
            {
                "id": 14,
                "name": "STATE_REBOOT",
                "title": "Installation Complete",
                "can_go_back": false,
                "next_state": null
            }
        ]
    },
    "package_categories": {
        "SYSTEM_TOOLS": {
            "category_name": "System Tools",
            "packages": [
                "jq",
                "yq",
                "lsof",
                "tmux",
                "screen",
                "mtools"
            ]
        },
        "NETWORK_TOOLS": {
            "category_name": "Network Tools",
            "packages": [
                "nmap",
                "iperf3"
            ]
        },
        "DEVELOPMENT": {
            "category_name": "Development",
            "packages": [
                "base-devel",
                "gcc",
                "clang",
                "cmake",
                "python",
                "rustup"
            ]
        },
        "MULTIMEDIA": {
            "category_name": "Multimedia",
            "packages": [
                "ffmpeg",
                "imagemagick",
                "mpv"
            ]
        },
        "MOUNT_TOOLS": {
            "category_name": "Mount Tools",
            "packages": [
                "gvfs",
                "gvfs-mtp",
                "gvfs-afc",
                "gvfs-smb"
            ]
        }
    },
    "sddm_themes": {
        "core_theme": {
            "name": "boraos-minimal",
            "description": "Minimal, logo-free theme (default)",
            "default": true
        },
        "optional_themes": [
            {
                "name": "nord-sddm",
                "description": "Nord color scheme theme",
                "default": false
            },
            {
                "name": "tokyo-night-sddm",
                "description": "Tokyo Night theme",
                "default": false
            },
            {
                "name": "sugar-dark-sddm",
                "description": "Sugar Dark theme",
                "default": false
            },
            {
                "name": "breeze-simple-sddm",
                "description": "Simple Breeze theme",
                "default": false
            },
            {
                "name": "fluent-minimal-sddm",
                "description": "Minimal Fluent design",
                "default": false
            }
        ]
    },
    "hyprland_optional_components": {
        "components": [
            {
                "name": "swww",
                "description": "Animated wallpaper daemon"
            },
            {
                "name": "swappy",
                "description": "Screenshot annotation tool"
            },
            {
                "name": "hyprshade",
                "description": "Screen shader effects"
            },
            {
                "name": "hyprcursor",
                "description": "Cursor theme manager"
            },
            {
                "name": "hyprprop",
                "description": "Window property inspector"
            },
            {
                "name": "wl-clipboard",
                "description": "Wayland clipboard utilities"
            }
        ]
    },
    "configuration_schema": {
        "language": {
            "type": "string",
            "format": "locale",
            "example": "en_US.UTF-8",
            "required": true
        },
        "keyboard_layout": {
            "type": "string",
            "example": "us",
            "required": true
        },
        "timezone": {
            "type": "object",
            "properties": {
                "region": {
                    "type": "string",
                    "example": "Europe"
                },
                "city": {
                    "type": "string",
                    "example": "Istanbul"
                }
            },
            "required": true
        },
        "disk": {
            "type": "object",
            "properties": {
                "path": {
                    "type": "string",
                    "example": "/dev/sda"
                },
                "partitioning": {
                    "type": "string",
                    "enum": [
                        "auto",
                        "manual"
                    ]
                },
                "disklabel": {
                    "type": "string",
                    "const": "boraos_01"
                },
                "filesystem": {
                    "type": "string",
                    "enum": [
                        "btrfs",
                        "ext4",
                        "xfs",
                        "f2fs"
                    ]
                }
            },
            "required": true
        },
        "user": {
            "type": "object",
            "properties": {
                "username": {
                    "type": "string",
                    "pattern": "^[a-z][a-z0-9_-]*$"
                },
                "sudo_policy": {
                    "type": "string",
                    "const": "user_password_required"
                }
            },
            "required": true
        },
        "network": {
            "type": "object",
            "properties": {
                "wifi_connected": {
                    "type": "boolean"
                },
                "ssid": {
                    "type": [
                        "string",
                        "null"
                    ]
                }
            },
            "required": true
        },
        "additional_packages": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "default": []
        },
        "sddm_theme": {
            "type": "string",
            "default": "boraos-minimal"
        },
        "hyprland_optional": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "default": []
        }
    },
    "installation_phases": {
        "phases": [
            {
                "id": 1,
                "name": "Disk Preparation",
                "steps": [
                    "Partition disk",
                    "Format filesystems",
                    "Mount filesystems"
                ],
                "weight": 10
            },
            {
                "id": 2,
                "name": "Base System",
                "steps": [
                    "Install base packages",
                    "Install kernel",
                    "Install firmware"
                ],
                "weight": 30
            },
            {
                "id": 3,
                "name": "Bootloader",
                "steps": [
                    "Install bootloader",
                    "Configure boot entries"
                ],
                "weight": 10
            },
            {
                "id": 4,
                "name": "System Configuration",
                "steps": [
                    "Set locale",
                    "Set timezone",
                    "Configure network",
                    "Create user",
                    "Configure sudo"
                ],
                "weight": 15
            },
            {
                "id": 5,
                "name": "Desktop Environment",
                "steps": [
                    "Install Hyprland",
                    "Install Waybar",
                    "Install core applications",
                    "Install SDDM",
                    "Configure theme"
                ],
                "weight": 20
            },
            {
                "id": 6,
                "name": "Additional Packages",
                "steps": [
                    "Install selected packages",
                    "Install Hyprland components"
                ],
                "weight": 10
            },
            {
                "id": 7,
                "name": "Finalization",
                "steps": [
                    "Generate initramfs",
                    "Setup systemd services",
                    "Unmount filesystems",
                    "Write logs"
                ],
                "weight": 5
            }
        ],
        "total_weight": 100
    },
    "validation_rules": {
        "username": {
            "pattern": "^[a-z][a-z0-9_-]*$",
            "min_length": 1,
            "max_length": 32,
            "reserved_names": [
                "root",
                "bin",
                "daemon",
                "sys",
                "sync",
                "games",
                "man",
                "lp",
                "mail",
                "news",
                "uucp",
                "proxy",
                "www-data",
                "backup",
                "list",
                "irc",
                "gnats",
                "nobody",
                "systemd-network",
                "systemd-resolve",
                "systemd-timesync"
            ]
        },
        "password": {
            "min_length": 8,
            "require_confirmation": true
        },
        "disk": {
            "minimum_size_gb": 20,
            "require_confirmation": true
        }
    },
    "ui_specifications": {
        "language": "english_only",
        "branding": "none",
        "color_scheme": {
            "background": "#1a1b26",
            "text": "#c0caf5",
            "accent": "#7aa2f7",
            "error": "#f7768e",
            "success": "#9ece6a"
        },
        "typography": {
            "title_size": "24px",
            "title_weight": "bold",
            "instruction_size": "14px",
            "content_size": "13px",
            "button_size": "14px"
        },
        "spacing": {
            "screen_padding": "40px",
            "section_spacing": "20px",
            "element_spacing": "10px",
            "button_spacing": "12px"
        }
    }
}