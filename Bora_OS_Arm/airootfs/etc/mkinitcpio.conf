# vim:set ft=sh
#
# SPDX-License-Identifier: GPL-3.0-or-later
#
# BoraOS 0.1 ARM (aarch64) - mkinitcpio configuration
# Initramfs for ARM64 live environment
#

# MODULES
# Modules loaded before any boot hooks are run.
# CRITICAL for VM compatibility: virtio drivers and filesystem modules
MODULES=(
    # Virtual machine support (QEMU/UTM)
    virtio
    virtio_blk
    virtio_pci
    virtio_net
    virtio_scsi
    virtio_mmio
    # Loop device (required for archiso squashfs mount)
    loop
    # Overlay filesystem (required for archiso cow)
    overlay
    # Squashfs (required for archiso)
    squashfs
)

# BINARIES
# Additional binaries to include in the CPIO image
BINARIES=()

# FILES
# Additional files to include (as-is, not parsed)
FILES=()

# HOOKS
# CRITICAL: archiso hook must be present for live ISO boot
# Order is important!
#
# - base: Essential base initramfs components
# - udev: Device manager for dynamic device nodes
# - modconf: Module configuration
# - keyboard: Keyboard support for early userspace
# - block: Block device support
# - filesystems: Filesystem support
# - archiso: ArchISO live environment hook (REQUIRED)
#
HOOKS=(base udev modconf keyboard block filesystems archiso)

# COMPRESSION
# Use zstd for best compression ratio with reasonable speed
COMPRESSION="zstd"

# COMPRESSION_OPTIONS
COMPRESSION_OPTIONS=(-9)
